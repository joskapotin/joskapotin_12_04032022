import{R as j,m as v,l as F,h as ot,P as L}from"./index.ee004186.js";import{G as st,d as X,x as K,o as R,u as lt,i as ut,n as z,D as ct,c as ft,f as I,L as q,C as pt,A as ht,k as w,l as dt,p as vt,r as yt,s as mt,v as gt,T as At}from"./generateCategoricalChart.972940d7.js";import{E as xt,X as U,Y}from"./YAxis.809a62a3.js";function C(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(n){return typeof n}:C=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},C(t)}function bt(t,i){if(t==null)return{};var n=Ot(t,i),r,e;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(e=0;e<o.length;e++)r=o[e],!(i.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function Ot(t,i){if(t==null)return{};var n={},r=Object.keys(t),e,o;for(o=0;o<r.length;o++)e=r[o],!(i.indexOf(e)>=0)&&(n[e]=t[e]);return n}function V(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?V(Object(n),!0).forEach(function(r){Pt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pt(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function _(t){return wt(t)||kt(t)||St(t)||_t()}function _t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(t,i){if(!!t){if(typeof t=="string")return M(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(t,i)}}function kt(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function wt(t){if(Array.isArray(t))return M(t)}function M(t,i){(i==null||i>t.length)&&(i=t.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=t[n];return r}function Dt(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function G(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,i,n){return i&&G(t.prototype,i),n&&G(t,n),t}function Ct(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&B(t,i)}function B(t,i){return B=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r},B(t,i)}function Nt(t){var i=jt();return function(){var r=N(t),e;if(i){var o=N(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Et(this,e)}}function Et(t,i){return i&&(C(i)==="object"||typeof i=="function")?i:Tt(t)}function Tt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},N(t)}var D=function(t){Ct(n,t);var i=Nt(n);function n(){var r;Dt(this,n);for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return r=i.call.apply(i,[this].concat(o)),r.mainCurve=void 0,r.state={isAnimationFinished:!0,totalLength:0},r.getStrokeDasharray=function(a,l,c){for(var f=c.reduce(function(x,b){return x+b}),d=Math.floor(a/f),u=a%f,p=l-a,h=[],y=0,g=0;;g+=c[y],++y)if(g+c[y]>u){h=[].concat(_(c.slice(0,y)),[u-g]);break}var O=h.length%2===0?[0,p]:[p];return[].concat(_(n.repeat(c,d)),_(h),O).map(function(x){return"".concat(x,"px")}).join(", ")},r.id=lt("recharts-line-"),r.pathRef=function(a){r.mainCurve=a},r.handleAnimationEnd=function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()},r.handleAnimationStart=function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()},r}return Lt(n,[{key:"componentDidMount",value:function(){if(!!this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,o=e.points,s=e.xAxis,a=e.yAxis,l=e.layout,c=e.children,f=ft(c,xt.displayName);if(!f)return null;function d(u,p){return{x:u.x,y:u.y,value:u.value,errorVal:X(u.payload,p)}}return f.map(function(u,p){return j.cloneElement(u,{key:"bar-".concat(p),data:o,xAxis:s,yAxis:a,layout:l,dataPointFormatter:d})})}},{key:"renderDots",value:function(e,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,c=a.points,f=a.dataKey,d=I(this.props),u=I(l,!0),p=c.map(function(y,g){var O=m(m(m({key:"dot-".concat(g),r:3},d),u),{},{value:y.value,dataKey:f,cx:y.x,cy:y.y,index:g,payload:y.payload});return n.renderDotItem(l,O)}),h={clipPath:e?"url(#clipPath-".concat(o,")"):null};return v(q,{className:"recharts-line-dots",...h,children:p},"dots")}},{key:"renderCurveStatically",value:function(e,o,s,a){var l=this.props,c=l.type,f=l.layout,d=l.connectNulls;l.ref;var u=bt(l,["type","layout","connectNulls","ref"]),p=m(m(m({},I(u,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(s,")"):null,points:e},a),{},{type:c,layout:f,connectNulls:d});return v(pt,{...p,pathRef:this.pathRef})}},{key:"renderCurveWithAnimation",value:function(e,o){var s=this,a=this.props,l=a.points,c=a.strokeDasharray,f=a.isAnimationActive,d=a.animationBegin,u=a.animationDuration,p=a.animationEasing,h=a.animationId,y=a.animateNewValues,g=a.width,O=a.height,x=this.state,b=x.prevPoints,P=x.totalLength;return v(ht,{begin:d,duration:u,isActive:f,easing:p,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(S){var k=S.t;if(b){var J=b.length/l.length,Q=l.map(function(A,et){var $=Math.floor(et*J);if(b[$]){var W=b[$],rt=w(W.x,A.x),nt=w(W.y,A.y);return m(m({},A),{},{x:rt(k),y:nt(k)})}if(y){var it=w(g*2,A.x),at=w(O/2,A.y);return m(m({},A),{},{x:it(k),y:at(k)})}return m(m({},A),{},{x:A.x,y:A.y})});return s.renderCurveStatically(Q,e,o)}var Z=w(0,P),E=Z(k),T;if(c){var tt="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});T=s.getStrokeDasharray(E,P,tt)}else T="".concat(E,"px ").concat(P-E,"px");return s.renderCurveStatically(l,e,o,{strokeDasharray:T})}},"line-".concat(h))}},{key:"renderCurve",value:function(e,o){var s=this.props,a=s.points,l=s.isAnimationActive,c=this.state,f=c.prevPoints,d=c.totalLength;return l&&a&&a.length&&(!f&&d>0||!dt(f,a))?this.renderCurveWithAnimation(e,o):this.renderCurveStatically(a,e,o)}},{key:"render",value:function(){var e=this.props,o=e.hide,s=e.dot,a=e.points,l=e.className,c=e.xAxis,f=e.yAxis,d=e.top,u=e.left,p=e.width,h=e.height,y=e.isAnimationActive,g=e.id;if(o||!a||!a.length)return null;var O=this.state.isAnimationFinished,x=a.length===1,b=z("recharts-line",l),P=c&&c.allowDataOverflow||f&&f.allowDataOverflow,S=R(g)?this.id:g;return F(q,{className:b,children:[P?v("defs",{children:v("clipPath",{id:"clipPath-".concat(S),children:v("rect",{x:u,y:d,width:p,height:h})})}):null,!x&&this.renderCurve(P,S),this.renderErrorBar(),(x||s)&&this.renderDots(P,S),(!y||O)&&vt.renderCallByParent(this.props,a)]})}}],[{key:"getDerivedStateFromProps",value:function(e,o){return e.animationId!==o.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:o.curPoints}:e.points!==o.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,o){for(var s=e.length%2!==0?[].concat(_(e),[0]):e,a=[],l=0;l<o;++l)a=[].concat(_(a),_(s));return a}},{key:"renderDotItem",value:function(e,o){var s;if(j.isValidElement(e))s=j.cloneElement(e,o);else if(ut(e))s=e(o);else{var a=z("recharts-line-dot",e?e.className:"");s=v(ct,{...o,className:a})}return s}}]),n}(ot.exports.PureComponent);D.displayName="Line";D.defaultProps={xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!st.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1};D.getComposedData=function(t){var i=t.props,n=t.xAxis,r=t.yAxis,e=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,c=t.offset,f=i.layout,d=l.map(function(u,p){var h=X(u,s);return f==="horizontal"?{x:K({axis:n,ticks:e,bandSize:a,entry:u,index:p}),y:R(h)?null:r.scale(h),value:h,payload:u}:{x:R(h)?null:n.scale(h),y:K({axis:r,ticks:o,bandSize:a,entry:u,index:p}),value:h,payload:u}});return m({points:d,layout:f},c)};var It=yt({chartName:"LineChart",GraphicalChild:D,axisComponents:[{axisType:"xAxis",AxisComp:U},{axisType:"yAxis",AxisComp:Y}],formatAxisMap:mt});function H({data:t}){const i=({active:r,payload:e})=>r&&e&&e.length?v("div",{className:"average-session__tooltip",children:v("span",{children:`${e[0].value} min`})}):null,n=r=>{if(r.isTooltipActive===!0){const e=document.querySelector(".average-session-charts");if(e){const o=e.clientWidth,s=r.activeCoordinate?Math.round(r.activeCoordinate.x/o*100):0;e.style.background=`linear-gradient(90deg, rgba(255,0,0,1) ${s}%, rgba(175,0,0,1.5) ${s}%, rgba(175,0,0,1.5) 100%)`}}};return F("div",{className:"average-session-charts__container",children:[v("h2",{className:"average-session-charts__title",children:"Dur\xE9e moyenne des sessions"}),v(gt,{className:"average-session-charts",width:"100%",height:"100%",children:F(It,{data:t,margin:{top:0,left:0,right:0,bottom:20},onMouseMove:r=>n(r),children:[v(U,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fill:"#FFF",opacity:.6},interval:"preserveStartEnd"}),v(Y,{domain:["dataMin - 20","dataMax + 20"],hide:!0}),v(At,{content:i,cursor:!1}),v(D,{type:"natural",dataKey:"sessionLength",dot:!1,activeDot:{fill:"#FFF"},strokeWidth:2,stroke:"#ff9999"})]})})]})}H.defaultProps={data:[]};H.propTypes={data:L.arrayOf(L.shape({day:L.string.isRequired,sessionLength:L.number.isRequired}).isRequired)};export{H as default};
