import{R as j,l as v,m as F,h as ot,q as _}from"./index.e9e7a360.js";import{b as st}from"./Dashboard.482525f9.js";import{G as ut,d as X,x as K,o as R,u as lt,i as ct,n as z,D as pt,c as ft,f as I,L as q,C as ht,A as dt,k as D,l as vt,p as yt,r as mt,s as gt,v as At,T as xt}from"./generateCategoricalChart.d827f065.js";import{E as bt,X as U,Y}from"./YAxis.65fa6a1c.js";function L(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(n){return typeof n}:L=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},L(t)}function Pt(t,a){if(t==null)return{};var n=Ot(t,a),r,e;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(e=0;e<o.length;e++)r=o[e],!(a.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function Ot(t,a){if(t==null)return{};var n={},r=Object.keys(t),e,o;for(o=0;o<r.length;o++)e=r[o],!(a.indexOf(e)>=0)&&(n[e]=t[e]);return n}function V(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?V(Object(n),!0).forEach(function(r){_t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _t(t,a,n){return a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}function S(t){return Dt(t)||wt(t)||kt(t)||St()}function St(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kt(t,a){if(!!t){if(typeof t=="string")return B(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,a)}}function wt(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function Dt(t){if(Array.isArray(t))return B(t)}function B(t,a){(a==null||a>t.length)&&(a=t.length);for(var n=0,r=new Array(a);n<a;n++)r[n]=t[n];return r}function Tt(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function G(t,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,a,n){return a&&G(t.prototype,a),n&&G(t,n),t}function Ct(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),a&&$(t,a)}function $(t,a){return $=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r},$(t,a)}function Nt(t){var a=It();return function(){var r=C(t),e;if(a){var o=C(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Et(this,e)}}function Et(t,a){return a&&(L(a)==="object"||typeof a=="function")?a:jt(t)}function jt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},C(t)}var T=function(t){Ct(n,t);var a=Nt(n);function n(){var r;Tt(this,n);for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return r=a.call.apply(a,[this].concat(o)),r.mainCurve=void 0,r.state={isAnimationFinished:!0,totalLength:0},r.getStrokeDasharray=function(i,u,c){for(var p=c.reduce(function(x,b){return x+b}),d=Math.floor(i/p),l=i%p,f=u-i,h=[],y=0,g=0;;g+=c[y],++y)if(g+c[y]>l){h=[].concat(S(c.slice(0,y)),[l-g]);break}var P=h.length%2===0?[0,f]:[f];return[].concat(S(n.repeat(c,d)),S(h),P).map(function(x){return"".concat(x,"px")}).join(", ")},r.id=lt("recharts-line-"),r.pathRef=function(i){r.mainCurve=i},r.handleAnimationEnd=function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()},r.handleAnimationStart=function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()},r}return Lt(n,[{key:"componentDidMount",value:function(){if(!!this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,o=e.points,s=e.xAxis,i=e.yAxis,u=e.layout,c=e.children,p=ft(c,bt.displayName);if(!p)return null;function d(l,f){return{x:l.x,y:l.y,value:l.value,errorVal:X(l.payload,f)}}return p.map(function(l,f){return j.cloneElement(l,{key:"bar-".concat(f),data:o,xAxis:s,yAxis:i,layout:u,dataPointFormatter:d})})}},{key:"renderDots",value:function(e,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,u=i.dot,c=i.points,p=i.dataKey,d=I(this.props),l=I(u,!0),f=c.map(function(y,g){var P=m(m(m({key:"dot-".concat(g),r:3},d),l),{},{value:y.value,dataKey:p,cx:y.x,cy:y.y,index:g,payload:y.payload});return n.renderDotItem(u,P)}),h={clipPath:e?"url(#clipPath-".concat(o,")"):null};return v(q,{className:"recharts-line-dots",...h,children:f},"dots")}},{key:"renderCurveStatically",value:function(e,o,s,i){var u=this.props,c=u.type,p=u.layout,d=u.connectNulls;u.ref;var l=Pt(u,["type","layout","connectNulls","ref"]),f=m(m(m({},I(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(s,")"):null,points:e},i),{},{type:c,layout:p,connectNulls:d});return v(ht,{...f,pathRef:this.pathRef})}},{key:"renderCurveWithAnimation",value:function(e,o){var s=this,i=this.props,u=i.points,c=i.strokeDasharray,p=i.isAnimationActive,d=i.animationBegin,l=i.animationDuration,f=i.animationEasing,h=i.animationId,y=i.animateNewValues,g=i.width,P=i.height,x=this.state,b=x.prevPoints,O=x.totalLength;return v(dt,{begin:d,duration:l,isActive:p,easing:f,from:{t:0},to:{t:1},onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart,children:function(k){var w=k.t;if(b){var J=b.length/u.length,Q=u.map(function(A,et){var M=Math.floor(et*J);if(b[M]){var W=b[M],rt=D(W.x,A.x),nt=D(W.y,A.y);return m(m({},A),{},{x:rt(w),y:nt(w)})}if(y){var at=D(g*2,A.x),it=D(P/2,A.y);return m(m({},A),{},{x:at(w),y:it(w)})}return m(m({},A),{},{x:A.x,y:A.y})});return s.renderCurveStatically(Q,e,o)}var Z=D(0,O),N=Z(w),E;if(c){var tt="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});E=s.getStrokeDasharray(N,O,tt)}else E="".concat(N,"px ").concat(O-N,"px");return s.renderCurveStatically(u,e,o,{strokeDasharray:E})}},"line-".concat(h))}},{key:"renderCurve",value:function(e,o){var s=this.props,i=s.points,u=s.isAnimationActive,c=this.state,p=c.prevPoints,d=c.totalLength;return u&&i&&i.length&&(!p&&d>0||!vt(p,i))?this.renderCurveWithAnimation(e,o):this.renderCurveStatically(i,e,o)}},{key:"render",value:function(){var e=this.props,o=e.hide,s=e.dot,i=e.points,u=e.className,c=e.xAxis,p=e.yAxis,d=e.top,l=e.left,f=e.width,h=e.height,y=e.isAnimationActive,g=e.id;if(o||!i||!i.length)return null;var P=this.state.isAnimationFinished,x=i.length===1,b=z("recharts-line",u),O=c&&c.allowDataOverflow||p&&p.allowDataOverflow,k=R(g)?this.id:g;return F(q,{className:b,children:[O?v("defs",{children:v("clipPath",{id:"clipPath-".concat(k),children:v("rect",{x:l,y:d,width:f,height:h})})}):null,!x&&this.renderCurve(O,k),this.renderErrorBar(),(x||s)&&this.renderDots(O,k),(!y||P)&&yt.renderCallByParent(this.props,i)]})}}],[{key:"getDerivedStateFromProps",value:function(e,o){return e.animationId!==o.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:o.curPoints}:e.points!==o.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,o){for(var s=e.length%2!==0?[].concat(S(e),[0]):e,i=[],u=0;u<o;++u)i=[].concat(S(i),S(s));return i}},{key:"renderDotItem",value:function(e,o){var s;if(j.isValidElement(e))s=j.cloneElement(e,o);else if(ct(e))s=e(o);else{var i=z("recharts-line-dot",e?e.className:"");s=v(pt,{...o,className:i})}return s}}]),n}(ot.exports.PureComponent);T.displayName="Line";T.defaultProps={xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ut.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1};T.getComposedData=function(t){var a=t.props,n=t.xAxis,r=t.yAxis,e=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,i=t.bandSize,u=t.displayedData,c=t.offset,p=a.layout,d=u.map(function(l,f){var h=X(l,s);return p==="horizontal"?{x:K({axis:n,ticks:e,bandSize:i,entry:l,index:f}),y:R(h)?null:r.scale(h),value:h,payload:l}:{x:R(h)?null:n.scale(h),y:K({axis:r,ticks:o,bandSize:i,entry:l,index:f}),value:h,payload:l}});return m({points:d,layout:p},c)};var Ft=mt({chartName:"LineChart",GraphicalChild:T,axisComponents:[{axisType:"xAxis",AxisComp:U},{axisType:"yAxis",AxisComp:Y}],formatAxisMap:gt});function H({data:t}){const a=st(t);return F("div",{className:"average-session-charts__container",children:[v("h2",{className:"average-session-charts__title",children:"Dur\xE9e moyenne des sessions"}),v(At,{className:"average-session-charts",width:"100%",height:"100%",children:F(Ft,{data:a,margin:{top:0,left:0,right:0,bottom:20},onMouseMove:r=>{if(r.isTooltipActive===!0){const e=document.querySelector(".average-session-charts"),o=e.clientWidth,s=Math.round(r.activeCoordinate.x/o*100);e.style.background=`linear-gradient(90deg, rgba(255,0,0,1) ${s}%, rgba(175,0,0,1.5) ${s}%, rgba(175,0,0,1.5) 100%)`}},children:[v(U,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fill:"#FFF",opacity:.6},interval:"preserveStartEnd"}),v(Y,{domain:["dataMin - 20","dataMax + 20"],hide:!0}),v(xt,{content:({active:r,payload:e})=>r&&e&&e.length?v("div",{className:"average-session__tooltip",children:v("span",{children:`${e[0].value} min`})}):null,cursor:!1}),v(T,{type:"natural",dataKey:"sessionLength",dot:!1,activeDot:{fill:"#FFF"},strokeWidth:2,stroke:"#ff9999"})]})})]})}H.defaultProps={data:{data:{userId:null,sessions:[]}}};H.propTypes={data:_.exports.PropTypes.shape({data:_.exports.PropTypes.shape({userId:_.exports.PropTypes.number,sessions:_.exports.PropTypes.arrayOf(_.exports.PropTypes.shape({day:_.exports.PropTypes.number.isRequired,sessionLength:_.exports.PropTypes.number.isRequired}))})})};export{H as default};
